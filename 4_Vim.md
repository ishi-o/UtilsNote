所有的`Unix Like`系统都会有`vi`编辑器，而现在多使用`vim`这个免费开源的编辑器(一些发行版的`vi`命令甚至是默认进入`vim`)。虽然现在常在`Linux`系统内看见它，但它终是一个工具，所以把它归入工具板块

---

[toc]

---

# `Vim`

## 基本用法

### 三种模式

`Vim`有三种常用模式：输入模式、命令行模式和命令模式

最初的状态为命令模式，也称一般模式，这时所有键入都会视为一个无需按回车便可以执行的命令

输入模式分为插入模式与替换模式，一些其它的文本编辑器也支持键入键盘上的`INSERT`来切换输入模式

键入**`a/A、i/I`或`o/O`**进入插入模式，键入**`r/R`**进入替换模式，各种进入命令差不多，感兴趣可自行了解

键入**`:`**进入命令行模式，命令行模式和一般模式的界限比较模糊，统一在一般模式里讲

在输入模式中，键入`Esc`可回到一般模式

在命令行模式中，输入`:q、:wq、:q!`可以关闭文件

以上为使用`Vim`需要的最低限度的知识，谁都会。当然，光是这些无法让`Vim`成为一款好用的编辑器，现在介绍一般模式的常用命令

### 一般模式命令

一般模式的命令区分大小写，命令默认为编辑光标所在行，按使用频率从大到小排列

#### 光标移动

- `h、j、k、l`：移动键，分别对应左、下、上、右，在前面附带数字可一次移动多行/多字(箭头同理)
- `0`：`Home`，不需要把手伸到数字键盘，很舒服
- `$`：`End`
- `G`：移动到文件末尾，前加`num`代表移动到第`num`行
- `gg`：相当于`1G`
- `b/B`：移动到上一个非字母/空白字符，可以认为是移动到一个单词的开头
- `e/E`：移动到下一个非字母/空白字符，可以认为是移动到一个单词的结尾
- `num+空格`：向右移动`num`个字符，移到行末不会停止
- `num+回车`：向下移动`num`行
- `Ctrl+f`：`Page Down`，在其他地方使用可能被查找功能覆盖
- `Ctrl+b`：`Page Up`
- `Ctrl+d`：向下移动半页
- `Ctrl+u`：向上移动半页
- `H`：光标移动到所见屏幕的开头
- `L`：光标移动到所见屏幕的末尾

#### 搜索

- `/aWord`：首先在光标下方寻找名为`aWord`的字符串，无则全局搜索

- `?aWord`：首先在光标上方寻找名为`aWord`的字符串，无则全局搜索

- `n`：重复上一个搜索动作

- `N`：反向进行上一个搜索动作

- `:L1,L2s/word1/word2/g`：用`word2`替换掉行`L1`和行`L2`间的`word1`

#### 字符操作

- `x`：删除后面的字符，前加`num`表示向后删除`num`个字符
- `X`：删除前面的字符，前加`num`表示向前删除`num`个字符
- `s/S`：删除后字符/整行，并进入插入模式
- `dd`：对整行`Ctrl+x`，前加`num`表示向后删除`num`行
- `d+移动命令`：
  - `d0/d$`：删除行头/行末与光标间的内容
  - `d+numG`：删除光标到第`num`行的内容
  - `db/de`：删除这个单词
- `yy`：对整行`Ctrl+c`，前加`num`表示向后复制`num`行
- `y+移动命令`：与`d+移动命令`类似
- `p/P`：粘贴
- `>>/<<`：添加/删除缩进

#### 重做与撤销

- `u`：撤销上一个动作
- `Ctrl+r`：如果上次动作为撤销，则恢复到撤销前的状态
- `.`：重做上一个动作

#### 文件操作

除了`:wq`与`:q!`外，有便捷方式：

- `ZZ`：等同于`:wq`
- `ZQ`：等同于`:q!`
- `:set nu`：显示行号
- `:set nonu`：取消行号

还可以实现不同文档间的跳转：

- `gf`：进入光标所指路径，没有则创建
- `Ctrl+o`：返回上一个文件

#### 块选择编辑

`Ctrl+v`进入矩形选择模式，选好后可以有以下操作：

- 输入`I`进入插入模式，输入内容后回到一般模式，可以发现在选中行的开头都加上了你输入的内容。这一方法常用于添加注释
- 输入`r`进入单字符替换模式，键入后自动回到一般模式，可以发现选中字符都替换掉了
- 输入`~`将选中字符转换大小写